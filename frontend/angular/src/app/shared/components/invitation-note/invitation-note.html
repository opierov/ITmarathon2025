<section
  class="invitation-note"
  [class.invitation-note--editing]="isEdit()"
  #popupHost
>
  <div class="invitation-note__actions">
    @if (editable()) {
      <app-icon-button
        [iconName]="isEdit() ? iconSave : iconEdit"
        [ariaLabel]="isEdit() ? ariaLabelSave : ariaLabelEdit"
        (click)="toggleEdit()"
      />
    }
    <app-icon-button
      [iconName]="iconCopy"
      [ariaLabel]="ariaLabelCopy"
      (click)="copy()"
    />
  </div>

  <div
    appCharCounter
    class="invitation-note__card"
    [initCounterValue]="invitationNote().length"
    [positionY]="charCounterPositionY"
  >
    <textarea
      #textarea
      [formControl]="control"
      [readonly]="!isEdit()"
      [attr.maxlength]="maxLength() ?? 1000"
      class="invitation-note__textarea"
      aria-label="Invitation note text"
    ></textarea>

    <p class="invitation-note__link">
      {{ invitationLink() }}
    </p>
  </div>
</section>
@if (isEdit()) {
  <p class="invitation-note__warning">Make sure you save changes</p>
}
